<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameOn - Cyber Sport Club</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
</head>
<body>

<!-- Hero section -->
<section class="hero" id="hero">
    <div class="main-header">
        <div class="container">
            <header>
                <div class="logo">
                    <h1>GameOn</h1>
                    <p>Cyber <span>Sport</span> Club</p>
                </div>
                <nav class="navbar">
                    <ul>
                        <li><a href="#about">О клубе</a></li>
                        <li><a href="#pricing">Цены</a></li>
                        <li><a href="#games">Игры</a></li>
                        <li><a href="#faq">Q&A</a></li>
                        <li><a href="#contacts">Контакты</a></li>
                    </ul>
                </nav>
            </header>
        </div>
    </div>
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <h2>Компьютерный клуб<br><span class="brand">GameOn</span> на Немиге</h2>
                <div class="features">
                    <div class="feature">
                        <img src="../../../../front/img/Check%20circle.png" alt="Check">
                        <p>Просторный BOOTCAMP на 5 ПК (GTX 4060, 240Hz)</p>
                    </div>
                    <div class="feature">
                        <img src="../../../../front/img/Check%20circle.png" alt="Check">
                        <p>Атмосферный лаунж: PS5, PS4 Pro, TV 4K. Можно поиграть или посмотреть матч!</p>
                    </div>
                </div>
                <div class="hero-buttons">
                    <a href="#booking" class="btn primary">Забронировать</a>
                    <a href="#about" class="btn secondary">Подробнее</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="../../../../front/img/gamingsetup.png" alt="Gaming setup">
                <div class="feature-bubble top-right">
                    <p>Отдельная VIP комната</p>
                </div>
                <div class="feature-bubble bottom-left">
                    <p>Работаем круглосуточно и без выходных</p>
                </div>
                <div class="feature-bubble top-left">
                    <p>30 игровых компьютеров</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Games Section -->
<section class="games" id="games">
    <div class="container">
        <div class="section-header">
            <h3>Популярные игры клуба</h3>
            <p>Во что у нас играют?</p>
        </div>
        <div class="games-grid">
            <div class="game-card">
                <div class="game-image">
                    <img src="../../../../front/img/cs2.jpg" alt="CS2">
                </div>
                <h4>CS2</h4>
            </div>
            <div class="game-card">
                <div class="game-image">
                    <img src="../../../../front/img/dota2.png" alt="Dota 2">
                </div>
                <h4>Dota 2</h4>
            </div>
            <div class="game-card">
                <div class="game-image">
                    <img src="../../../../front/img/pubg.avif" alt="Pubg">
                </div>
                <h4>Pubg</h4>
            </div>
            <div class="game-card">
                <div class="game-image">
                    <img src="../../../../front/img/leagueoflegends.jpg" alt="League of Legends">
                </div>
                <h4>League of Legends</h4>
            </div>
        </div>
        <div class="section-button">
            <a href="#pricing" class="btn secondary">Цены</a>
        </div>
    </div>
</section>

<!-- Pricing Section -->
<section class="pricing" id="pricing">
    <div class="container">
        <div class="section-header">
            <h3>Цены на услуги</h3>
        </div>
        <div class="pricing-tabs">
            <div class="tab active" data-tab="pc">Тарифы на игровые ПК</div>
            <div class="tab" data-tab="console">Консоли и ТВ</div>
            <div class="tab" data-tab="packages">Абонементы и пакеты</div>
        </div>
        <div class="pricing-content">
            <div class="tab-content active" id="pc-content">
                <p>Стандарт – 6р/час (ПК с комфортными условиями)</p>
                <p>Про – 8р/час (GTX 4060, 240Hz, механическая клавиатура, топовое кресло)</p>
                <p>BOOTCAMP (5 мест) – 35р/час (идеально для командных тренировок)</p>
            </div>
            <div class="tab-content" id="console-content">
                <p>PS4 + ТВ – 10р/час (до 4 игроков на одном экране)</p>
            </div>
            <div class="tab-content" id="packages-content">
                <p>5 часов – 30р (экономия 10%)</p>
                <p>10 часов – 60р (экономия 15%)</p>
                <p>Ночной тариф (23:00–06:00) – 42р</p>
            </div>
        </div>
        <div class="section-button">
            <a href="#booking" class="btn primary">Забронировать</a>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="about" id="about">
    <div class="container">
        <div class="section-header">
            <h3>О нашем клубе</h3>
        </div>
        <div class="about-grid">
            <img src="../../../../front/img/mario.png" alt="Mario" class="mario-element mario">
            <img src="../../../../front/img/garden.png" alt="Bush" class="mario-element garden-1">
            <img src="../../../../front/img/coin.png" alt="Coin" class="mario-element coin-1">
            <img src="../../../../front/img/coin.png" alt="Coin" class="mario-element coin-2">
            <img src="../../../../front/img/block.png" alt="Block" class="mario-element block">
            <img src="../../../../front/img/flower.png" alt="Flower" class="mario-element flower">
            <img src="../../../../front/img/garden.png" alt="Bush" class="mario-element garden-2">
            <img src="../../../../front/img/coin.png" alt="Coin" class="mario-element coin-4">
            <img src="../../../../front/img/coin.png" alt="Coin" class="mario-element coin-5">
            <img src="../../../../front/img/mushroom.png" alt="Mushroom" class="mario-element mushroom">
            <img src="../../../../front/img/pipe.png" alt="Pipe" class="mario-element pipe">
            <img src="../../../../front/img/garden.png" alt="Bush" class="mario-element garden-3">
            <div class="about-grid">
                <div class="about-card">
                    <h4>Комната отдыха с PS4 и TV</h4>
                    <img src="../../../../front/img/playstationcontroller.png" alt="PlayStation controller">
                </div>
                <div class="about-card">
                    <h4>Система лояльности</h4>
                    <ul>
                        <li>Карта постоянного клиента</li>
                        <li>Бонусные часы за игру</li>
                        <li>Скидки на турниры</li>
                    </ul>
                </div>
                <div class="about-card">
                    <h4>Мероприятия</h4>
                    <ul>
                        <li>Проведение LAN-турниров</li>
                        <li>Трансляции чемпионатов и турниров</li>
                        <li>Проведение стримов на площадке клубов</li>
                        <li>Ивенты в ночное время суток</li>
                        <li>Вечер кино</li>
                    </ul>
                </div>
                <div class="about-card">
                    <h4>Еда и напитки</h4>
                    <ul>
                        <li>Энергетические напитки</li>
                        <li>Алкогольные напитки (18+)</li>
                        <li>Закуски</li>
                        <li>Шоколадные батончики/снэки</li>
                        <li>Газированные напитки</li>
                        <li>Кофе / чай</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq" id="faq">
    <div class="container">
        <div class="section-header">
            <h3>
                <span class="staircase">Ответы</span><br>
                <span class="staircase">на частые</span><br>
                <span class="staircase">вопросы</span>
            </h3>
            <p>Мы знаем, что у вас появились вопросы, мы постарались перечислить наиболее важные из них</p>
        </div>
        <div class="faq-list">
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Можно ли установить свои игры?</h4>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <p>Да, вы можете установить свои игры через свой аккаунт Steam, Epic Games или другие платформы.</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Можно ли прийти со своей едой и напитками?</h4>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <p>Да, вы можете принести свою еду и напитки. Однако у нас также есть широкий выбор снеков и напитков.</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Можно ли приходить со своими девайсами?</h4>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <p>Да, вы можете приносить свои клавиатуры, мыши, наушники и другие периферийные устройства.</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <h4>Есть ли у вас ограничения по возрасту?</h4>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <p>Посетители младше 14 лет должны быть в сопровождении взрослых. Алкогольные напитки доступны только для посетителей старше 18 лет.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Booking Section -->
<section class="booking" id="booking">
    <div class="container">
        <div class="booking-section">
            <div class="section-header" id="booking-header">
                <h3 id="header-title">Регистрация и бронирование</h3>
                <p id="header-subtitle">Зарегистрируйтесь в системе, чтобы забронировать игровое время</p>
            </div>


            <!-- Add this after your registration form -->
            <div id="login-form" class="booking-form">
                <form id="user-login-form">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="login-email" placeholder="Электронная почта" required>
                        </div>
                        <div class="form-group">
                            <input type="password" id="login-password" placeholder="Пароль" required>
                        </div>
                    </div>
                    <button type="submit" id="login-button" class="btn primary">Войти</button>
                </form>
            </div>

            <!-- Registration Form -->
            <div id="registration-form" class="booking-form active">
                <form id="register-form">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="user-name" placeholder="Ваше имя" required>
                        </div>
                        <div class="form-group">
                            <input type="email" id="user-email" placeholder="Электронная почта" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="password" id="user-password" placeholder="Пароль" required>
                        </div>
                        <div class="form-group">
                            <input type="password" id="confirm-password" placeholder="Подтвердите пароль" required>
                        </div>
                    </div>
                    <button type="submit" id="register-button" class="btn primary">Зарегистрироваться</button>
                </form>
            </div>

            <!-- Booking Form (appears after registration) -->
            <div id="user-booking-form" class="booking-form">
                <form id="booking-form">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="date" id="booking-date" required>
                        </div>
                        <div class="form-group">
                            <input type="time" id="booking-time" required>
                        </div>
                    </div>
                    <div class="booking-buttons">
                        <button type="submit" id="book-button" class="btn primary">Забронировать</button>
                        <button type="button" id="logout-button" class="btn secondary">Выйти</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>


<!-- Footer -->
<section class="footer-section" id="contacts">
    <div class="container">
        <div class="footer-content">
            <div class="footer-map">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2350.513434386362!2d27.547245!3d53.909784!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46dbcfd354294325%3A0x6ac8f8e419a4d6a1!2z0L_RgNC-0YHQvy4g0J_QvtCx0LXQtNC40YLQtdC70LXQuSA3LCDQnNC40L3RgdC6!5e0!3m2!1sru!2sby!4v1616587391297!5m2!1sru!2sby" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
            <div class="footer-info">
                <div class="footer-logo">
                    <h3>GameOn</h3>
                    <p>Cyber <span>Sport</span> Club</p>
                </div>
                <p>Просторный BOOTCAMP на 5 ПК (GTX 4060, 240Hz).<br> Бронируйте заранее по телефону!</p>
                <div class="social-links">
                    <h4>Социальные сети</h4>
                    <div class="social-icons">
                        <a href="https://www.instagram.com/sxkuradesu/" target="_blank">
                            <img src="img/instagram.svg" alt="Instagram">
                        </a>
                        <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstley" target="_blank">
                            <img src="img/youtube.svg" alt="YouTube">
                        </a>
                        <a href="https://x.com/home" target="_blank">
                            <img src="img/twitter.svg" alt="Twitter">
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-links">
                <div class="footer-nav">
                    <h4>Навигация</h4>
                    <ul>
                        <li><a href="#about">О клубе</a></li>
                        <li><a href="#pricing">Цены</a></li>
                        <li><a href="#games">Игры</a></li>
                        <li><a href="#faq">FAQ</a></li>
                        <li><a href="#contacts">Контакты</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h4>Контакты</h4>
                    <div class="contact-item">
                        <img src="../../../../front/img/Map%20pin.png" alt="Location">
                        <div>
                            <h5>Минск</h5>
                            <p>пр. Победителей, 7</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <img src="../../../../front/img/Phone.png" alt="Phone">
                        <div>
                            <h5>+375 44 123 4567</h5>
                            <p>Круглосуточно</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin-login">
                <h4>Вход для администратора</h4>
                <div class="admin-form">
                    <div id="email-form" class="login-step active">
                        <input type="email" placeholder="Email" id="admin-email">
                        <button id="admin-email-submit" class="btn primary">Далее</button>
                    </div>
                    <div id="password-form" class="login-step">
                        <input type="text" placeholder="Уникальный код" id="admin-unique-code">
                        <button id="admin-login-submit" class="btn primary">Войти</button>
                    </div>
                </div>
            </div>
        <div class="copyright">
            <p>Copyright © 2025 - 2025 GameOn - All rights reserved</p>
        </div>
    </div>
</section>


<!-- Add JavaScript for admin login toggle -->
<script>
    // Simple tabs functionality
document.querySelectorAll('.tab').forEach(tab => {
tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.getElementById(`${tab.dataset.tab}-content`).classList.add('active');
});
});

// FAQ toggle
document.querySelectorAll('.faq-question').forEach(question => {
question.addEventListener('click', () => {
    const item = question.parentElement;
    item.classList.toggle('active');
});
});

// Admin login form toggle
document.getElementById('admin-email-submit').addEventListener('click', function(e) {
    e.preventDefault();
    const email = document.getElementById('admin-email').value;
    if (!email) {
        alert('Пожалуйста, введите email');
        return;
    }
    console.log('Переход к вводу уникального кода для:', email);
    document.getElementById('email-form').classList.remove('active');
    document.getElementById('password-form').classList.add('active');
});

document.getElementById('register-form').addEventListener('submit', function(e) {
e.preventDefault();

// Проверка совпадения паролей
const password = document.getElementById('user-password').value;
const confirmPassword = document.getElementById('confirm-password').value;

if (password !== confirmPassword) {
    alert('Пароли не совпадают!');
    return;
}

const userData = {
    name: document.getElementById('user-name').value,
    email: document.getElementById('user-email').value, 
    password: password,
    bookedSeats: 1 // Default value
};

apiCall('/api/auth/register', 'POST', userData)
    .then(response => {
        console.log('Registration successful', response);
        storeToken(response.token);

        // Получаем имя пользователя
        const userName = userData.name;

        // Обновляем заголовок и подзаголовок
        document.getElementById('header-title').textContent = `Здравствуйте, ${userName}!`;
        document.getElementById('header-subtitle').textContent = 'Выберите время для бронирования';

        // Переключаем формы
        document.getElementById('registration-form').classList.remove('active');
        document.getElementById('user-booking-form').classList.add('active');
    })
    .catch(error => {
        console.error('Registration failed', error);
        alert('Ошибка регистрации: ' + (error.message || 'Проверьте введенные данные'));
    });

// Получаем имя пользователя
const userName = document.getElementById('user-name').value;

// Обновляем заголовок и подзаголовок
document.getElementById('header-title').textContent = `Здравствуйте, ${userName}!`;
document.getElementById('header-subtitle').textContent = 'Выберите время для бронирования';

// Переключаем формы
document.getElementById('registration-form').classList.remove('active');
document.getElementById('user-booking-form').classList.add('active');
});

document.getElementById('booking-form').addEventListener('submit', function(e) {
    e.preventDefault();

    // Get token to check if user is logged in
    const token = getToken();
    if (!token) {
        alert('Пожалуйста, войдите в систему');
        return;
    }

    // Get the first available workstation (you might want to let users choose)
    apiCall('/api/workstations', 'GET')
        .then(workstations => {
            // Find first available workstation
            const availableStation = workstations.find(station => station.available);
            if (!availableStation) {
                throw new Error('Нет доступных рабочих мест');
            }

            const bookingData = {
                workStationId: availableStation.id,
                startTime: formatDateTime(document.getElementById('booking-date').value, document.getElementById('booking-time').value),
                // Set end time 2 hours after start time
                endTime: formatDateTime(document.getElementById('booking-date').value, document.getElementById('booking-time').value, 2),
                status: "pending"
            };

            return apiCall('/api/bookings', 'POST', bookingData, token);
        })
        .then(response => {
            console.log('Booking successful', response);
            alert(`Бронирование успешно создано! Стоимость: ${response.totalPrice} р.`);
        })
        .catch(error => {
            console.error('Booking failed', error);
            alert('Ошибка бронирования: ' + (error.message || 'Проверьте введенные данные'));
        });
});

// Helper function to format date and time for API
function formatDateTime(date, time, addHours = 0) {
    const dt = new Date(`${date}T${time}`);
    if (addHours) {
        dt.setHours(dt.getHours() + addHours);
    }
    return dt.toISOString();
}
// Add event listener for logout button
document.getElementById('logout-button').addEventListener('click', function(e) {
e.preventDefault();

// Reset the header back to registration view
document.getElementById('header-title').textContent = 'Регистрация и бронирование';
document.getElementById('header-subtitle').textContent = 'Зарегистрируйтесь в системе, чтобы забронировать игровое время';

// Switch forms back to registration
document.getElementById('user-booking-form').classList.remove('active');
document.getElementById('registration-form').classList.add('active');

// Clear form fields
document.getElementById('user-name').value = '';
document.getElementById('user-email').value = '';
document.getElementById('user-password').value = '';
document.getElementById('confirm-password').value = '';
});
// Create floating elements for booking section background
function createFloatingElements() {
const bookingSection = document.querySelector('.booking');

for (let i = 0; i < 8; i++) {
    const element = document.createElement('div');
    element.classList.add('floating-element');

    // Random size between 50px and 150px
    const size = Math.floor(Math.random() * 100) + 50;
    element.style.width = `${size}px`;
    element.style.height = `${size}px`;

    // Random position
    element.style.left = `${Math.random() * 100}%`;
    element.style.top = `${Math.random() * 100}%`;

    // Random animation delay
    element.style.animationDelay = `${Math.random() * 5}s`;

    // Random opacity
    element.style.opacity = Math.random() * 0.3;

    bookingSection.appendChild(element);
}
}

// Login form handler
document.getElementById('user-login-form').addEventListener('submit', function(e) {
e.preventDefault();

const loginData = {
    email: document.getElementById('login-email').value,
    password: document.getElementById('login-password').value
};

apiCall('/api/auth/login', 'POST', loginData)
    .then(response => {
        console.log('Login successful', response);
        storeToken(response.token);

        // Get user details with the token
        return apiCall('/api/users/' + getUserIdFromToken(response.token), 'GET', null, response.token);
    })
    .then(userData => {
        // Обновляем заголовок и подзаголовок
        document.getElementById('header-title').textContent = `Здравствуйте, ${userData.name}!`;
        document.getElementById('header-subtitle').textContent = 'Выберите время для бронирования';

        // Переключаем формы
        document.getElementById('login-form').classList.remove('active');
        document.getElementById('user-booking-form').classList.add('active');
    })
    .catch(error => {
        console.error('Login failed', error);
        alert('Ошибка входа: ' + (error.message || 'Проверьте введенные данные'));
    });
});

// Function to extract user ID from the JWT token
function getUserIdFromToken(token) {
const base64Url = token.split('.')[1];
const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
}).join(''));

return JSON.parse(jsonPayload).id;
}

// API utility functions
function apiCall(url, method, data, token = null) {
    return fetch(`http://localhost:8080${url}`, {
        method: method,
        headers: {
            'Content-Type': 'application/json',
            ...(token && { 'Authorization': `Bearer ${token}` })
        },
        body: data ? JSON.stringify(data) : null
    })
    .then(response => {
        console.log('API call:', url, 'Status:', response.status);
        if (!response.ok) {
            return response.json().then(err => {
                console.error('API error response:', err);
                throw new Error(err.message || 'Ошибка сервера');
            });
        }
        return response.json();
    })
    .catch(error => {
        console.error('Fetch error for', url, ':', error.message);
        throw error;
    });
}

// Update the admin login code in the main page
document.getElementById('admin-login-submit').addEventListener('click', function(e) {
    e.preventDefault();
    const loginData = {
        email: document.getElementById('admin-email').value,
        uniqueCode: document.getElementById('admin-unique-code').value
    };
    apiCall('/api/auth/login', 'POST', loginData)
        .then(response => {
            console.log('Admin login successful', response);
            storeToken(response.token);
            window.location.href = 'admin.html?adminLogin=true';
        })
        .catch(error => {
            console.error('Admin login failed', error);
            alert('Ошибка входа: ' + (error.message || 'Проверьте введенные данные'));
        });
});

// Store token in session storage
function storeToken(token) {
    console.log('Сохранение токена:', token);
    sessionStorage.setItem('jwtToken', token);
}

// Get token from session storage
function getToken() {
return sessionStorage.getItem('jwtToken');
}

// Clear token (for logout)
function clearToken() {
sessionStorage.removeItem('jwtToken');
}

// Call the function when the page loads
window.addEventListener('load', createFloatingElements);

    // Add this to your existing script in index.html

// Create tabs for registration/login
const registerTab = document.createElement('div');
registerTab.className = 'tab active';
registerTab.dataset.tab = 'register';
registerTab.textContent = 'Регистрация';

const loginTab = document.createElement('div');
loginTab.className = 'tab';
loginTab.dataset.tab = 'login';
loginTab.textContent = 'Вход';

const tabsContainer = document.createElement('div');
tabsContainer.className = 'pricing-tabs';
tabsContainer.appendChild(registerTab);
tabsContainer.appendChild(loginTab);

// Insert tabs before registration form
const bookingHeader = document.getElementById('booking-header');
bookingHeader.after(tabsContainer);

// Handle tab switching
registerTab.addEventListener('click', function() {
    registerTab.classList.add('active');
    loginTab.classList.remove('active');
    document.getElementById('registration-form').classList.add('active');
    document.getElementById('login-form').classList.remove('active');
});

loginTab.addEventListener('click', function() {
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
    document.getElementById('login-form').classList.add('active');
    document.getElementById('registration-form').classList.remove('active');
});
</script>
</body>
</html>